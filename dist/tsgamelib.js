
var SoundEffect=function(){function t(t){this.instances=[],this._volume=1,this._muted=!1,this.src=t}return Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.applyToAllInstances(function(n){n.volume=t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.applyToAllInstances(function(n){n.muted=t})},enumerable:!0,configurable:!0}),t.prototype.play=function(){var t=this.instances.length-1;this.instances.push(new Audio(this.src)),this.instances[t+1].volume=this._volume,this.instances[t+1].muted=this._muted,this.instances[t+1].play();var n=this;this.instances[t+1].onended=function(){n.instances.splice(t+1,1)}},t.prototype.applyToAllInstances=function(t){if(this.instances.length>0)for(var n=0;n<this.instances.length;n++)t(this.instances[n])},t}();
var Soundtrack=function(){function t(t){this.track=new Audio(t),this.track.onended=function(){this.currentTime=0,this.play()}}return Object.defineProperty(t.prototype,"volume",{get:function(){return this.track.volume},set:function(t){this.track.volume=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this.track.muted},set:function(t){this.track.muted=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"src",{get:function(){return this.track.src},set:function(t){this.track.src=t},enumerable:!0,configurable:!0}),t.prototype.play=function(){this.track.play()},t.prototype.pause=function(){this.track.pause()},t}();
var Point=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.add=function(i,n){i instanceof t&&null==n?(this.addX(i.x),this.addY(i.y)):i instanceof Size&&null==n?(this.addX(i.width),this.addY(i.height)):"number"==typeof i&&"number"==typeof n&&(this.addX(i),this.addY(n))},t.prototype.addX=function(t){this.x+=t},t.prototype.addY=function(t){this.y+=t},t}();
var Size=function(){function i(i,t){this.width=i,this.height=t}return i}();
var Circle=function(){function t(t,i){this.pos=t,this.radius=i}return t.prototype.center=function(){return new Point(this.pos.x+this.radius,this.pos.y+this.radius)},t.prototype.collides=function(i,n){return i instanceof Rectangle?i.collides(this):i instanceof t?this.collision(i.center().x,i.center().y,i.radius):i instanceof Point&&null!=n?this.collision(i.x+n,i.y+n,n):i instanceof Point?this.collision(i.x,i.y):void 0},t.prototype.collision=function(t,i,n){var o=this.radius,s=null!=n?n:0,e=this.center().x-t;e*=e;var r=this.center().y-i;r*=r;var c=Math.sqrt(e+r);return o+s>c},t}();
var Rectangle=function(){function i(i,t,s,e){i instanceof Point&&t instanceof Size?(this.pos=i,this.size=t):"number"==typeof i&&"number"==typeof t&&(this.pos=new Point(i,t),this.size=new Size(s,e))}return i.prototype.center=function(){var i=this.pos.x+this.size.width/2,t=this.pos.y+this.size.height/2;return new Point(i,t)},i.prototype.points=function(){var i=new Point(this.pos.x+this.size.width,this.pos.y),t=new Point(this.pos.x+this.size.width,this.pos.y+this.size.height),s=new Point(this.pos.x,this.pos.y+this.size.height);return[this.pos,i,t,s]},i.prototype.collides=function(t,s){return t instanceof Circle?this.circleAndRectCollision(t):t instanceof i?this.collision(t.pos.x,t.pos.y,t.size.width,t.size.height):t instanceof Point?null!=s?this.collision(t.x,t.y,s.width,s.height):this.collision(t.x,t.y,0,0):void 0},i.prototype.collision=function(i,t,s,e){return i+s>=this.pos.x&&i<=this.pos.x+this.size.width&&t+e>=this.pos.y&&t<=this.pos.y+this.size.height},i.prototype.circleAndRectCollision=function(i){var t=Math.abs(i.center().x-this.center().x),s=Math.abs(i.center().y-this.center().y);if(t>this.size.width/2+i.radius)return!1;if(s>this.size.height/2+i.radius)return!1;if(t<=this.size.width/2)return!0;if(s<=this.size.height/2)return!0;var e=Math.pow(t-this.size.width/2,2)+Math.pow(s-this.size.height/2,2);return e<=Math.pow(i.radius,2)},i}();